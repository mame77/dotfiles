# プレフィックスをCtrl+fに変更
set -g prefix C-f
unbind C-b
bind C-f send-prefix

# マウス操作を無効化
set -g mouse off

# ウィンドウとペインの番号を1から開始
set -g base-index 1
set -g pane-base-index 1

# ウィンドウ番号を自動で詰める
set -g renumber-windows on

# エスケープキーの遅延を短縮
set -s escape-time 0

# ウィンドウ作成
bind k command-prompt -p "Window name:" "new-window -c '#{pane_current_path}' -n '%%'"

# ウィンドウの移動
bind -r h previous-window
bind -r l next-window

# ウィンドウ名変更
bind r command-prompt "rename-window '%%'"

# ウィンドウ削除
bind u kill-window


# ステータスバーの更新間隔
set -g status-interval 5

# ステータスバーの色とスタイル
set -g status-style 'fg=#ffffff'
set -g status-left '[#S] '
set -g status-left-length 20
set -g status-right ''
set -g status-justify centre

# ウィンドウリストの色
setw -g window-status-style 'fg=#888888'
setw -g window-status-current-style 'bg=#bae1ff,fg=#000000,bold'
setw -g window-status-format ' #W '
setw -g window-status-current-format ' #W '

# セッション選択画面の色設定
set -g mode-style 'bg=#bae1ff,fg=#000000'

setw -g automatic-rename off
# アクティビティ監視
setw -g monitor-activity on
set -g visual-activity on

bind-key -T prefix n command-prompt -p "Session name:" "new-session -d -s '%%'"

# セッション選択画面での新規セッション作成
bind-key -T prefix j choose-session
bind-key -T choose-tree n command-prompt -p "Session name:" "new-session -d -s '%%'; refresh-client"

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'

# resurrect設定（オプション）
set -g @resurrect-capture-pane-contents 'on'  # ペインの内容も保存
set -g @resurrect-strategy-vim 'session'      # vimセッション復元

# resurrectキーバインド変更
set -g @resurrect-save 'i'        # 保存をiキーに変更
set -g @resurrect-restore 'u'     # 復元をuキーに変更

# tmux終了
bind o detach-client

# サーバー終了
bind q kill-server


# TPM初期化（最後に必要）
run '~/.tmux/plugins/tpm/tpm'
